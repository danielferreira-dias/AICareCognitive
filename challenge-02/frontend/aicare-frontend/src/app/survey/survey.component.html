<div class="flex flex-col w-full justify-center items-center">
    
    <app-surveynavbar class="w-[90%] px-6 mx-auto max-w-6xl"></app-surveynavbar>

    <section class="bg-black py-12 px-6 rounded-xl shadow-lg max-w-4xl mx-auto mt-10 w-[80%]">
        <h2 class="text-3xl text-white font-bold text-center mb-10">
            {{ categories[currentCategory].category }}
        </h2>

        <form (ngSubmit)="submitForm()" class="px-5">
            <!-- Render Questions Dynamically -->
            <div *ngFor="let question of categories[currentCategory]?.questions; let i = index" class="mb-6">
                <label for="question{{ i }}" class="block text-white font-semibold mb-2">
                    {{ question.label }}
                </label>

                <!-- Dropdown for One-Hot Encoded Questions -->
                <select *ngIf="question.type === 'one-hot'"
                        id="question{{ i }}"
                        [(ngModel)]="formData['category' + currentCategory + '-question' + i]"
                        name="category{{ currentCategory }}-question{{ i }}"
                        class="w-full p-3 bg-zinc-900 rounded-sm focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:bg-zinc-900 text-white">
                    <option [value]="1">Yes</option>
                    <option [value]="0">No</option>
                </select>

                <!-- Text Input for Other Questions -->
                <input *ngIf="question.type === 'text'"
                       id="question{{ i }}"
                       type="text"
                       [(ngModel)]="formData['category' + currentCategory + '-question' + i]"
                       name="category{{ currentCategory }}-question{{ i }}"
                       class="w-full p-3 bg-zinc-900 rounded-sm focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:bg-zinc-900 text-white"
                       required />
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between items-center mt-8">
                <button type="button" (click)="prevCategory()"
                        [disabled]="currentCategory === 0"
                        class="bg-gray-700 text-white py-2 px-6  rounded-sm hover:bg-gray-600 disabled:opacity-50">
                    Previous
                </button>

                <button *ngIf="currentCategory === categories.length - 1" type="submit"
                        class="bg-green-500 text-white py-2 px-6  rounded-sm hover:bg-green-400 mt-4">
                    Submit
                </button>

                <button type="button" (click)="nextCategory()"
                        [disabled]="currentCategory === categories.length - 1"
                        class="bg-gray-300 text-zinc-800 font-semibold py-2 px-6 rounded-sm hover:bg-gray-900 disabled:opacity-50">
                    Next
                </button>
            </div>
        </form>
    </section>
</div>
