<div class="flex flex-col w-full justify-center items-center">
  <div class="w-[90%] px-6 mx-auto max-w-6xl">
    <nav
      class="bg-black p-4 border-b-[1px] border-b-zinc-800 px-10 py-5 w-full"
    >
      <div class="flex flex-row justify-between items-center">
        <h1 class="text-2xl text-white font-bold">Algorithm Settings</h1>
      </div>
    </nav>
  </div>

  <section
    class="bg-black py-12 px-6 rounded-xl shadow-lg max-w-4xl mx-auto mt-10 w-[80%]"
  >
    <h2 class="text-3xl text-white font-bold text-center mb-10">
      Configure Algorithm
    </h2>

    <!-- Dropdown -->
    <div class="mb-6">
      <label for="algorithm-select" class="block text-white mb-2"
        >Select Algorithm:</label
      >
      <select
        id="algorithm-select"
        class="bg-zinc-900 text-white p-2 rounded-md w-full"
        [(ngModel)]="selectedAlgorithm"
        (change)="onAlgorithmChange()"
      >
        <option value="TOPSIS">TOPSIS</option>
        <option value="PROMETHEE_II">PROMETHEE II</option>
      </select>
    </div>

    <!-- Configure Weights Button -->
    <div class="flex gap-4">
      <button
        class="bg-gray-700 text-white py-2 px-6 rounded-sm hover:bg-gray-600"
        (click)="openWeightsPopup()"
      >
        Configure Weights
      </button>

      <!-- Get Activities Button -->
      <button
        class="bg-blue-700 text-white py-2 px-6 rounded-sm hover:bg-blue-600"
        (click)="getActivities()"
      >
        Get Activities
      </button>
    </div>

    <!-- Results -->
    <div *ngIf="activities.length > 0" class="mt-8">
      <h3 class="text-xl text-white font-bold mb-4">Activities:</h3>
      <ul class="list-disc list-inside text-white">
        <li *ngFor="let activity of activities">
          {{ activity.activity }} - Score:
          {{ activity.score | number : "1.2-2" }}
        </li>
      </ul>
    </div>
  </section>

  <!-- Popup -->
  <div
    *ngIf="showWeightsPopup"
    class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"
  >
    <div
      class="bg-white p-6 rounded-md shadow-lg max-w-2xl w-full"
      style="max-height: 80vh; overflow-y: auto"
    >
      <h3 class="text-lg font-bold mb-4">Configure Weights</h3>

      <!-- Weight List in Two Columns -->
      <ul
        class="grid grid-cols-2 gap-4"
        style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr))"
      >
        <li *ngFor="let weight of weights" class="flex flex-col">
          <label class="font-medium text-gray-700 mb-1">{{
            weight.criterion
          }}</label>
          <input
            type="number"
            [(ngModel)]="weight.weight"
            class="border border-gray-300 p-2 rounded-md w-full"
            min="0"
            max="1"
            step="0.01"
          />
        </li>
      </ul>

      <!-- Action Buttons -->
      <div class="flex justify-end gap-4 mt-6">
        <button
          class="bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-600"
          (click)="saveWeights()"
        >
          Save
        </button>
        <button
          class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-500"
          (click)="closeWeightsPopup()"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>
